#!/usr/bin/env coffee



minimist =		require 'minimist'
argv = minimist process.argv.slice 2



help = [
	'Usage:'
	'vbb-rest -t <token> [-p <port>]'
	''
	'Arguments:'
	'  token       The VBB API server access token.'
	''
	'Options:'
	'  -p, --port  Where the server will listen. Default: 8000'
].join '\n'

if argv.h is true or argv.help is true
	process.stdout.write help
	process.exit 0



port = 8000

if argv.p? then port = argv.p
if argv.port? then port = argv.port



Server =		require '../src/Server'
winston =		require 'winston'   # todo: consider using `bunyan`

server = Object.create Server
server.init argv._[0], port, winston
server.listen () ->
	winston.info "Server listening on #{port}."
